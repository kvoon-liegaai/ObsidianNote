# 阻塞
## 样式阻塞

### style标签中的样式解析

1. 由**html标签解析器**进行解析
	1. html标签解析：一次只解析一部分，分多步解析
2. style标签解析是**异步**的（容易产生闪屏现象
	1. 闪屏现象：结构先出现在页面上，随后样式生效
3. 浏览器加载资源是异步的
4. 不阻塞DOM的解析


### link标签中的样式解析(推荐使用

> 只有link引入的外部css才能够产生阻塞
> 
> **只阻塞渲染，不阻塞解析**

1. 由**css解析器**进行解析
2. link解析是**同步**的，会阻塞页面的**渲染**
3. 阻塞后面js语句的执行
	1. ```<link></link>--阻塞--><script></script>```
4. 不阻塞DOM的解析（绝大多数浏览器的工作方式）

由于link会产生阻塞，阻塞期间可以使用loading效果


---

## JS阻塞

1. 阻塞后续DOM**解析**
2. 阻塞页面**渲染**
3. 阻塞后续 `<script>`解析

全都阻塞的原因：防止做无用功，JS脚本可以修改页面结构和样式，阻塞`<script>`是因为要维护依赖关系

---

***备注***

一、 css的解析和js的解析是互斥的

二、无论css阻塞还是js阻塞，都**不会阻塞浏览器加载外部资源（图片、视频等）**：浏览器会优先发送网络请求

三、 WebKit 和 Firefox 都进行了【预加载】。在执行js脚本时，浏览器的其它线程会预解析文档的其余部分，找出并执行需要通过网络加载的其它资源。通过这种方式，资源可以在并行连接上加载，从而提高总体速度。请注意，预解析器不会修改DOM树。**（可以理解为碰到了没有操作的DOM的脚本时，浏览器偷偷解析其它的资源？）**

***DOMContentLoaded***


***onload 事件***
